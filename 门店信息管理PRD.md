# 门店信息管理 PRD

## 一、背景说明

### 1.1 业务背景

小而美 Home Stay 民宿管理系统作为连接平台与商户的核心系统，需要完整采集和管理商户的门店信息。门店信息是用户（C端客人）选择和预订民宿的核心决策依据，也是平台进行商户资质审核、服务监管的重要基础。

完整的门店信息包括：
- **基础信息**：账号、门店名称、地址、开业时间等基本资料
- **硬件设施**：门店设施、周边环境、房型配置等物理条件
- **运营政策**：入住退房时间、取消政策、押金、早餐等服务规则
- **展示素材**：门店图片、视频等营销素材
- **结算信息**：营业执照、银行账户等支付结算资料

### 1.2 核心问题

**问题1：信息采集复杂度高**
- 门店信息涉及60+个字段，分散在账号、设施、政策、展示、结算等多个维度
- 商户填写时容易遗漏关键信息，导致信息不完整
- 缺乏分步引导机制，商户体验差

**问题2：枚举选项管理混乱**
- 门店设施、亮点等枚举选项由产品/运营定义，当前写死在代码中
- 新增/修改选项需要改代码发版，效率低且容易出错
- 选项需要在多个页面保持一致，维护成本高

**问题3：审核流程不完善**
- 缺乏平台对商户上架信息的审核环节
- 无法控制商户信息质量，影响C端用户体验

### 1.3 解决方案

基于以上问题，设计"门店信息管理"功能模块，包含3个子功能：

| 功能 | 操作角色 | 功能定位 |
|------|----------|----------|
| **门店信息配置** | 商户 | 商户填写和提交门店完整信息，支持草稿保存和分步提交 |
| **选项配置** | 平台 | 平台管理员配置门店设施、亮点等枚举选项，实时联动到商户端 |
| **商户上架** | 平台 | 平台审核商户提交的门店信息，决定是否准许上架 |

---

## 二、功能概述

### 2.1 功能架构

```
门店信息管理
├── 门店信息配置（商户端）
│   ├── Tab1 基本信息
│   ├── Tab2 设施周边
│   ├── Tab3 运营政策
│   ├── Tab4 门店展示
│   ├── Tab5 房型设置
│   └── Tab6 支付结算
├── 选项配置（平台端）
│   ├── 门店亮点配置（2个分类）
│   └── 门店设施配置（12个分类）
└── 商户上架（平台端）
    ├── 上架申请列表
    └── 查看门店信息
```

### 2.2 角色说明

**商户（门店运营者）**
- 填写和维护门店完整信息
- 分6个Tab逐步完成信息录入
- 提交后等待平台审核

**平台管理员**
- 配置门店设施、亮点等枚举选项，供商户选择使用
- 审核商户提交的门店信息
- 决定商户是否准许上架

### 2.3 核心流程

```
商户首次入驻流程：
1. 商户填写Tab1-6信息 → 2. 提交到平台 → 3. 平台审核 → 4. 准许上架 → 5. 门店在C端展示

商户信息维护流程：
1. 商户进入已提交的页面 → 2. 点击"编辑"进入编辑模式 → 3. 修改信息 → 4. 保存（无需重新审核）

平台枚举选项管理流程：
1. 平台进入"选项配置" → 2. 选择分类 → 3. 添加/编辑/删除/排序选项 → 4. 实时联动到商户端
```

---

## 三、门店信息配置（商户端）

### 3.1 页面结构

**路由地址**：`/merchant-backend/join-application/apply`

**页面布局**：
- **顶部吸顶Tab导航**：6个Tab横向排列，显示Tab标题和完成状态图标
- **右侧操作区**：
  - 未提交状态：显示"自动保存状态" + "保存草稿"按钮 + "提交本页"按钮
  - 已提交、非编辑模式：显示"编辑"按钮
  - 已提交、编辑模式：显示"取消"按钮 + "保存"按钮
- **内容区**：当前Tab的表单内容

**6个Tab标签**：
1. Tab1：基本信息
2. Tab2：设施周边
3. Tab3：运营政策
4. Tab4：门店展示
5. Tab5：房型设置
6. Tab6：支付结算

**Tab完成状态标识**：
- 未提交：Tab标题右侧显示红色感叹号图标
- 已提交：不显示图标（表示已完成）

---

### 3.2 Tab1 - 基本信息

#### 3.2.1 卡片结构

Tab1包含3个卡片：
1. 账号信息
2. 门店基本信息
3. 门店亮点

#### 3.2.2 卡片1：账号信息

**数据来源**：商户填写

| 字段名称 | 必填/选填 | 字段类型 | 输入框内暗提示 | 输入框下方提示 | 展示条件 | 其他说明 |
|---------|----------|---------|--------------|--------------|----------|----------|
| 主账号 | 必填 | 填空（带手机图标前缀） | 13575481983 | 系统最高权限者，用于登录 | 默认展示 | 最多11位，需验证手机号格式（失焦时校验，错误提示："请输入正确的11位手机号"） |
| 预订电话 | 必填 | 填空（带手机图标前缀） | 13575481983 | 客人预订时的联系电话 | 默认展示 | 最多11位，需验证手机号格式 |
| 预订微信 | 选填 | 填空（带微信图标前缀） | 13575481983 | 客人预订时的微信号 | 默认展示 | 最多50字 |
| PMS房态管理系统 | 选填 | 单选 | - | - | 默认展示 | 选项：订单来了、其他 |
| 订单来了门店编号 | 选填 | 填空 | 69808093 | - | 选择"订单来了"时展示 | 最多50字 |

#### 3.2.3 卡片2：门店基本信息

**数据来源**：商户填写

| 字段名称 | 必填/选填 | 字段类型 | 输入框内暗提示 | 输入框下方提示 | 展示条件 | 其他说明 |
|---------|----------|---------|--------------|--------------|----------|----------|
| 门店名称 | 必填 | 填空 | 原乡芦茨 | 门店对外展示的名称 | 默认展示 | 最多50字 |
| 详细地址 | 必填 | 填空 | XX省XX市XX区XX街道XX号 | 门店完整地址 | 默认展示 | 最多200字 |
| 房间数量 | 必填 | 数字输入框 | 21 | 门店客房总数，此数字会影响后续房型配置提示 | 默认展示 | 最小1，最大500 |
| 开业时间 | 必填 | 填空 | 2016 | 门店开业年份 | 默认展示 | 最多20字 |
| slogan或门店推荐语 | 选填 | 填空 | 闭门深山，无计好眠。 | 一句话介绍门店特色 | 默认展示 | 最多50字 |
| 门店介绍 | 选填 | 多行填空（12行） | 详细介绍门店位置、建筑特色、房型分布、配套设施、周边环境等。请分段描述，让客人全面了解您的门店。<br><br>示例：<br>XXXX位于富春江畔毗邻芦茨湾，几幢青瓦白墙小楼依次坐落在芦茨湾边上，推门望江水，开窗见青山。<br><br>目前分为4栋，分别为1号院、2号院、3号院、5号院，共计21间客房。大大落地窗，独户一露台，足不出户坐看闲云。<br><br>设有餐厅、咖啡馆、茶空间和猫猫杂货铺，暖身暖胃，食住无忧。 | - | 默认展示 | 下方显示字符计数"已输入 X 字" |

#### 3.2.4 卡片3：门店亮点（至少选择3项）

**卡片标题**：门店亮点（至少选择3项）*

**数据来源**：从选项配置API动态加载（`getCategoryOptions('architecture')` 和 `getCategoryOptions('services')`）

**二级分类**：
1. **建筑与景观**：展示从API加载的选项
2. **服务与设施**：展示从API加载的选项

**字段类型**：多选（卡片样式，一行4列布局）

**输入框下方提示**：至少选择3项

**实时联动机制**：
- 页面挂载时，监听`window.addEventListener('optionsConfigUpdated', handleOptionsUpdate)`
- 当平台修改选项配置时，自动重新调用API加载最新选项
- 页面卸载时，移除监听器

---

### 3.3 Tab2 - 设施周边

#### 3.3.1 卡片结构

Tab2包含2个卡片：
1. 门店设施
2. 周边信息

#### 3.3.2 卡片1：门店设施

**数据来源**：从选项配置API动态加载（每个分类对应一个API调用）

**二级分类**（12个）：

| 分类名称 | 必填/选填 | 字段类型 | API分类key | 布局 |
|---------|----------|---------|-----------|------|
| 交通服务 | 必填 | 多选（卡片样式） | transportation | 一行4列 |
| 清洁服务 | 必填 | 多选（卡片样式） | cleaning | 一行4列 |
| 安全安保 | 必填 | 多选（卡片样式） | security | 一行4列 |
| 公共区域 | 必填 | 多选（卡片样式） | publicArea | 一行4列 |
| 前台服务 | 必填 | 多选（卡片样式） | frontDesk | 一行4列 |
| 娱乐设施 | 选填 | 多选（卡片样式） | entertainment | 一行4列 |
| 餐饮服务 | 选填 | 多选（卡片样式） | catering | 一行4列 |
| 商务服务 | 选填 | 多选（卡片样式） | business | 一行4列 |
| 儿童设施 | 选填 | 多选（卡片样式） | children | 一行4列 |
| 运动设施 | 选填 | 多选（卡片样式） | sports | 一行4列 |
| 康体设施 | 选填 | 多选（卡片样式） | wellness | 一行4列 |
| 无障碍设施 | 选填 | 多选（卡片样式） | accessibility | 一行4列 |

**实时联动机制**：同Tab1门店亮点，监听`optionsConfigUpdated`事件自动重新加载

#### 3.3.3 卡片2：周边信息

**三级分类**（3个）：
1. 交通
2. 景点
3. 逛吃

**交通（必填）**

| 字段名称 | 必填/选填 | 字段类型 | 输入框内暗提示 | 输入框下方提示 | 展示条件 | 其他说明 |
|---------|----------|---------|--------------|--------------|----------|----------|
| 地点名称 | 必填 | 填空 | 桐庐站 | - | 默认展示 | - |
| 距离住宿地（公里） | 必填 | 数字输入框（后缀"公里"） | 24 | - | 默认展示 | 最小0，支持1位小数 |
| 驾驶时间（分钟） | 必填 | 数字输入框（后缀"分钟"） | 25 | - | 默认展示 | 最小0，整数 |
| 展示在酒店列表 | 单选 | 单选框 | - | - | 默认展示 | 交通分类中必须有且仅有1条勾选展示 |

**操作**：
- 默认展示1条交通信息（不可删除）
- 可点击"添加交通信息"按钮添加更多条
- 第2条及以上可删除

**景点（必填）**

字段结构同"交通"，必须有且仅有1条勾选"展示在酒店列表"

**逛吃（选填）**

| 字段名称 | 必填/选填 | 字段类型 | 输入框内暗提示 | 展示条件 | 其他说明 |
|---------|----------|---------|--------------|----------|----------|
| 地点名称 | 必填 | 填空 | 芦茨村 | 默认展示 | - |
| 距离住宿地（公里） | 必填 | 数字输入框（后缀"公里"） | 2 | 默认展示 | 最小0，支持1位小数 |
| 驾驶时间（分钟） | 必填 | 数字输入框（后缀"分钟"） | 10 | 默认展示 | 最小0，整数 |

**操作**：
- 默认不展示（显示灰色提示"可选项，如需添加请点击上方按钮"）
- 点击"添加逛吃信息"按钮添加条目
- 所有条目均可删除

---

### 3.4 Tab3 - 运营政策

#### 3.4.1 卡片结构

Tab3包含1个卡片：酒店政策

#### 3.4.2 卡片：酒店政策

**三级分类**（5个）：
1. 重要通知
2. 预订与取消
3. 入住政策
4. 前台支付
5. 早餐政策

**分类1：重要通知（选填）**

| 字段名称 | 必填/选填 | 字段类型 | 输入框内暗提示 | 展示条件 |
|---------|----------|---------|--------------|----------|
| 重要通知 | 选填 | 多行填空（3行） | 临时性重要通知，如设施维护等。示例：泳池维护中，12月30日前暂不可使用。 | 默认展示 |

**分类2：预订与取消（必填）**

| 字段名称 | 必填/选填 | 字段类型 | 输入框内暗提示 | 输入框下方提示 | 展示条件 |
|---------|----------|---------|--------------|--------------|----------|
| 最晚预订时间 | 必填 | 时间选择器（HH:mm，30分钟步长） | 入住日14:30 | 入住日当天的最晚预订时间 | 默认展示 |
| 办理入住时间 | 必填 | 时间选择器（HH:mm，30分钟步长） | 入住日14:30 | 开始办理入住的时间 | 默认展示 |
| 最晚退房时间 | 必填 | 时间选择器（HH:mm，30分钟步长） | 离店日12:00 | 最晚退房的时间 | 默认展示 |
| 最晚取消时间 - 天数 | 必填 | 数字输入框 | 1 | - | 默认展示 |
| 最晚取消时间 - 时间 | 必填 | 时间选择器（HH:mm，30分钟步长） | 18:00 | 例如：入住日前1天18:00前可免费取消 | 默认展示 |

**分类3：入住政策（必填）**

| 字段名称 | 必填/选填 | 字段类型 | 展示条件 | 其他说明 |
|---------|----------|---------|----------|----------|
| 成人年龄限制 | 必填 | 单选 | 默认展示 | 选项：不限制、限制 |
| 成人最低年龄 | 必填 | 数字输入框（后缀"岁"） | 选择"限制"时展示 | 最小1，最大99 |
| 儿童限制 | 必填 | 单选 | 默认展示 | 选项：不接待儿童、接待儿童 |
| 儿童年龄限制 | 必填 | 单选 | 选择"接待儿童"时展示 | 选项：不限制、限制 |
| 儿童最低年龄 | 必填 | 数字输入框（后缀"岁"） | 选择"儿童年龄限制-限制"时展示 | 最小1，最大18 |
| 入住押金 | 必填 | 单选 | 默认展示 | 选项：不需要、需要 |
| 押金金额 | 必填 | 数字输入框（后缀"元"） | 选择"需要"时展示 | 最小0 |

**分类4：前台支付（必填）**

| 字段名称 | 必填/选填 | 字段类型 | 展示条件 | 其他说明 |
|---------|----------|---------|----------|----------|
| 前台可用支付方式 | 必填 | 多选（卡片样式，一行4列） | 默认展示 | 选项：银联、VISA、Mastercard、微信、支付宝、Apple Pay、现金 |

**分类5：早餐政策（必填）**

| 字段名称 | 必填/选填 | 字段类型 | 展示条件 | 其他说明 |
|---------|----------|---------|----------|----------|
| 是否提供早餐 | 必填 | 单选 | 默认展示 | 选项：不提供、提供 |
| 早餐类型 | 必填 | 单选 | 选择"提供"时展示 | 选项：中式、西式、中西式 |
| 供应形式 | 必填 | 单选 | 选择"提供"时展示 | 选项：固定套餐、自助餐、单点 |
| 供应开始时间 | 必填 | 时间选择器（HH:mm，30分钟步长） | 选择"提供"时展示 | - |
| 供应结束时间 | 必填 | 时间选择器（HH:mm，30分钟步长） | 选择"提供"时展示 | - |
| 加早费用 | 必填 | 数字输入框（后缀"元/份"） | 选择"提供"时展示 | 最小0 |
| 儿童早餐判断标准 | 必填 | 单选 | 选择"提供"时展示 | 选项：按年龄、按身高 |
| 儿童年龄标准 | 必填 | 下拉选择 | 选择"按年龄"时展示 | 选项：6岁以下、12岁以下、16岁以下、18岁以下 |
| 儿童身高标准 | 必填 | 下拉选择 | 选择"按身高"时展示 | 选项：1.2米以下、1.4米以下、1.5米以下 |
| 儿童早餐收费方式 | 必填 | 单选 | 选择"提供"时展示 | 选项：免费、收费 |
| 儿童早餐费用 | 必填 | 数字输入框（后缀"元/份"） | 选择"收费"时展示 | 最小0 |

---

### 3.5 Tab4 - 门店展示

#### 3.5.1 卡片结构

Tab4包含1个卡片：门店展示

#### 3.5.2 字段列表

| 字段名称 | 必填/选填 | 字段类型 | 规格要求 | 输入框下方提示 | 其他说明 |
|---------|----------|---------|---------|--------------|----------|
| 门店logo | 必填 | 图片上传 | 建议尺寸1:1，最大5MB | 建议尺寸1:1，支持jpg、png格式 | 右侧显示"图片实例"链接 |
| 门店主页首图 | 必填 | 图片上传（多张） | 建议比例2:3，最多5张，单张最大10MB | 建议比例2:3，最多5张，支持jpg、png格式 | 右侧显示"图片实例"链接 |
| 列表页封面 | 必填 | 图片上传 | 建议比例4:3，宽度>1000px，最大10MB | 建议比例4:3，宽度>1000px，支持jpg、png格式 | 右侧显示"图片实例"链接 |
| 房型图 | 必填 | 图片上传（多张） | 建议比例3:2，最多10张，单张最大10MB | 建议比例3:2，最多10张，支持jpg、png格式 | 右侧显示"图片实例"链接 |
| 旅游交通图 | 必填 | 图片上传 | 最大10MB | 标注门店位置及周边交通、景点，支持jpg、png格式 | 右侧显示"图片实例"链接 |
| 小程序分享图（自动生成） | 系统生成 | 图片预览 | 比例5:4 | 由列表页封面自动生成，比例5:4 | 上传"列表页封面"后自动展示此行 |
| 视频封面 | 选填 | 图片上传 | 最大10MB | 如需上传门店视频，请先上传视频封面 | 右侧显示"图片实例"链接 |
| 门店视频 | 选填 | 视频上传 | 最大100MB | 展示门店风貌，支持mp4格式 | 需要先上传视频封面才可上传视频 |

**图片实例链接**：点击后在新窗口打开示例图片

---

### 3.6 Tab5 - 房型设置

#### 3.6.1 页面结构

**顶部操作栏**：
- 左侧："添加房型"按钮（主按钮样式）
- 右侧：配置进度提示
  - 格式：`酒店房间数共X间，已配置Y间`
  - 颜色：
    - 已配置数量 = 总房间数：绿色（表示完成）
    - 已配置数量 < 总房间数：橙色（表示待完成）

**房型列表**：
- 卡片式展示，每个房型一张卡片
- 卡片包含：
  - 房型名称（标题）
  - 房间数量、可住人数、面积、楼层（信息行）
  - 房型图片缩略图（最多显示4张，超过显示"+N"）
  - 操作按钮：编辑、复制、删除

**空状态**：无房型时显示"暂无房型，请添加房型信息"

#### 3.6.2 房型编辑弹窗

**触发方式**：点击"添加房型"、"编辑"、"复制"按钮

**弹窗内容**（左右布局表单）：

**基础信息**

| 字段名称 | 必填/选填 | 字段类型 | 输入框内暗提示 | 输入框下方提示 | 展示条件 | 其他说明 |
|---------|----------|---------|--------------|--------------|----------|----------|
| 房型名称 | 必填 | 填空 | 经典大床房 | 房型对外展示的名称 | 默认展示 | 最多20字 |
| 房型说明 | 选填 | 多行填空（3行） | 温馨舒适，配备大床 | 补充说明房型特色 | 默认展示 | 最多200字 |
| 该房型数量 | 必填 | 数字输入框 | 5 | 该房型有多少间 | 默认展示 | 最小1 |
| 楼层 | 选填 | 填空 | 1,2,3 | 该房型分布的楼层，用逗号分隔 | 默认展示 | 示例：1,2,3 |
| 面积 | 必填 | 数字输入框（后缀"㎡"） | 30 | 房间面积 | 默认展示 | 最小0，支持1位小数 |
| 是否有窗 | 必填 | 单选 | - | - | 默认展示 | 选项：有窗、无窗 |
| 是否禁烟 | 必填 | 单选 | - | - | 默认展示 | 选项：禁烟、不禁烟 |
| 携带宠物 | 必填 | 单选 | - | - | 默认展示 | 选项：允许、不允许 |
| 可住人数 | 必填 | 数字输入框 | 2 | 房间可容纳的人数 | 默认展示 | 最小1 |
| 允许加客 | 必填 | 单选 | - | - | 默认展示 | 选项：不允许、允许 |
| 最多可加人数 | 必填 | 数字输入框 | 1 | - | 选择"允许"时展示 | 最小1 |
| 加客费用 | 必填 | 数字输入框（后缀"元/人"） | 100 | - | 选择"允许"时展示 | 最小0 |

**房间布局**

| 字段名称 | 必填/选填 | 字段类型 | 展示条件 | 其他说明 |
|---------|----------|---------|----------|----------|
| 客厅数量 | 必填 | 数字输入框 | 默认展示 | 最小0 |
| 卫生间数量 | 必填 | 数字输入框 | 默认展示 | 最小1 |
| 卧室数量 | 必填 | 数字输入框 | 默认展示 | 最小1，修改后动态生成卧室配置表单 |
| 卧室X - 床数量 | 必填 | 数字输入框 | 默认展示 | 根据"卧室数量"动态生成卧室配置，修改后动态生成床配置表单 |
| 卧室X - 床Y - 宽度 | 必填 | 数字输入框（后缀"米"） | 默认展示 | 最小0.8，最大2.4，支持1位小数 |
| 卧室X - 床Y - 长度 | 必填 | 数字输入框（后缀"米"） | 默认展示 | 最小1.6，最大2.4，支持1位小数 |

**房型特色**

| 字段名称 | 必填/选填 | 字段类型 | 展示条件 | 其他说明 |
|---------|----------|---------|----------|----------|
| 房型特色 | 选填 | 多选（卡片样式，一行2列） | 默认展示 | 选项：有浴缸、有家庭套房、可加床、可拆分为双床 |

**房型设施**（8个分类，从选项配置API动态加载）

| 分类名称 | 必填/选填 | 字段类型 | API分类key | 布局 |
|---------|----------|---------|-----------|------|
| 客房设施 | 选填 | 多选（卡片样式） | roomFacilities | 一行4列 |
| 客房布局和家具 | 选填 | 多选（卡片样式） | roomLayout | 一行4列 |
| 卫浴设施 | 选填 | 多选（卡片样式） | bathroom | 一行4列 |
| 洗浴用品 | 选填 | 多选（卡片样式） | toiletries | 一行4列 |
| 床上用品 | 选填 | 多选（卡片样式） | bedding | 一行4列 |
| 便利设施 | 选填 | 多选（卡片样式） | convenience | 一行4列 |
| 媒体科技 | 选填 | 多选（卡片样式） | mediaTech | 一行4列 |
| 食品饮品 | 选填 | 多选（卡片样式） | foodDrink | 一行4列 |

**房型图片**

| 字段名称 | 必填/选填 | 字段类型 | 规格要求 | 其他说明 |
|---------|----------|---------|---------|----------|
| 房型图片 | 必填 | 图片上传（多张） | 建议比例3:2，最多10张，单张最大10MB | 展示房间内部环境 |

---

### 3.7 Tab6 - 支付结算

#### 3.7.1 主体类型选择

| 字段名称 | 必填/选填 | 字段类型 | 展示条件 | 其他说明 |
|---------|----------|---------|----------|----------|
| 主体类型 | 必填 | 单选 | 默认展示 | 选项：有限责任公司、个体工商户 |

选择不同主体类型后，展示对应的表单内容

#### 3.7.2 有限责任公司表单

**基本信息**

| 字段名称 | 必填/选填 | 字段类型 | 输入框内暗提示 | 输入框下方提示 | 展示条件 |
|---------|----------|---------|--------------|--------------|----------|
| 注册账号 | 必填 | 填空 | 手机号或邮箱 | 用于登录微信支付商户平台 | 默认展示 |
| 营业执照上的公司名称 | 必填 | 填空 | XX有限公司 | - | 默认展示 |
| 统一社会信用代码 | 必填 | 填空 | 91XXXXXXXXXX | 18位代码 | 默认展示 |
| 营业执照有效期 | 必填 | 单选 + 日期选择器 | - | - | 默认展示 |
| 法人姓名 | 必填 | 填空 | - | - | 默认展示 |
| 法人身份证号 | 必填 | 填空 | - | 18位身份证号码 | 默认展示 |
| 法人居住地址 | 必填 | 填空 | - | 身份证上的地址 | 默认展示 |
| 法人身份证有效期 | 必填 | 单选 + 日期选择器 | - | - | 默认展示 |

**门店信息**

| 字段名称 | 必填/选填 | 字段类型 | 展示条件 |
|---------|----------|---------|----------|
| 门店所在地区 | 必填 | 地区选择器 | 默认展示 |
| 门店详细地址 | 必填 | 填空 | 默认展示 |

**对公账户信息**

| 字段名称 | 必填/选填 | 字段类型 | 输入框下方提示 | 展示条件 |
|---------|----------|---------|--------------|----------|
| 账户名称 | 必填 | 填空 | 需与营业执照上的公司名称一致 | 默认展示 |
| 对公账户银行账号 | 必填 | 填空 | - | 默认展示 |
| 开户银行 | 必填 | 下拉选择 | 例如：中国工商银行 | 默认展示 |
| 开户地 | 必填 | 地区选择器 | - | 默认展示 |
| 开户银行全称 | 必填 | 填空 | 例如：中国工商银行杭州滨江支行 | 默认展示 |
| 开户证明 | 必填 | 图片上传 | 银行开具的开户许可证或开户证明 | 默认展示 |

**商户信息**

| 字段名称 | 必填/选填 | 字段类型 | 输入框下方提示 | 展示条件 |
|---------|----------|---------|--------------|----------|
| 商户名称 | 必填 | 填空 | 对外展示的商户名称 | 默认展示 |
| 账户简称 | 必填 | 填空 | 用于微信/支付宝账单展示 | 默认展示 |

**联系人信息**

| 字段名称 | 必填/选填 | 字段类型 | 展示条件 |
|---------|----------|---------|----------|
| 联系人姓名 | 必填 | 填空 | 默认展示 |
| 联系人身份证号码 | 必填 | 填空 | 默认展示 |
| 联系人手机号码 | 必填 | 填空 | 默认展示 |
| 联系人常用邮箱 | 必填 | 填空 | 默认展示 |

**资质照片**

| 字段名称 | 必填/选填 | 字段类型 | 展示条件 |
|---------|----------|---------|----------|
| 营业执照照片 | 必填 | 图片上传 | 默认展示 |
| 法人身份证照片 | 必填 | 图片上传 | 默认展示 |
| 门店门头照片 | 必填 | 图片上传 | 默认展示 |
| 前台照片 | 必填 | 图片上传 | 默认展示 |
| 店铺内景照片 | 必填 | 图片上传 | 默认展示 |

#### 3.7.3 个体工商户表单

**基本信息**

| 字段名称 | 必填/选填 | 字段类型 | 输入框下方提示 | 展示条件 |
|---------|----------|---------|--------------|----------|
| 注册账号 | 必填 | 填空 | 用于登录微信支付商户平台 | 默认展示 |
| 营业执照上的经营者姓名 | 必填 | 填空 | - | 默认展示 |
| 统一社会信用代码 | 必填 | 填空 | 18位代码 | 默认展示 |
| 营业执照有效期 | 必填 | 单选 + 日期选择器 | - | 默认展示 |
| 身份证姓名 | 必填 | 填空 | - | 默认展示 |
| 身份证号 | 必填 | 填空 | 18位身份证号码 | 默认展示 |
| 居住地址 | 必填 | 填空 | 身份证上的地址 | 默认展示 |
| 身份证有效期 | 必填 | 单选 + 日期选择器 | - | 默认展示 |

**门店信息**

同有限责任公司

**银行账户信息**

| 字段名称 | 必填/选填 | 字段类型 | 输入框下方提示 | 展示条件 |
|---------|----------|---------|--------------|----------|
| 账户名称 | 必填 | 填空 | 需与经营者姓名一致 | 默认展示 |
| 银行账号 | 必填 | 填空 | - | 默认展示 |
| 开户行 | 必填 | 下拉选择 | 例如：中国工商银行 | 默认展示 |
| 开户地 | 必填 | 地区选择器 | - | 默认展示 |
| 开户银行全称 | 必填 | 填空 | 例如：中国工商银行杭州滨江支行 | 默认展示 |
| 法人银行卡照片 | 必填 | 图片上传 | - | 默认展示 |

**商户信息**

同有限责任公司

**联系人信息**

同有限责任公司

**资质照片**

| 字段名称 | 必填/选填 | 字段类型 | 展示条件 |
|---------|----------|---------|----------|
| 营业执照照片 | 必填 | 图片上传 | 默认展示 |
| 身份证照片 | 必填 | 图片上传 | 默认展示 |
| 门店门头照片 | 必填 | 图片上传 | 默认展示 |
| 前台照片 | 必填 | 图片上传 | 默认展示 |
| 店铺内景照片 | 必填 | 图片上传 | 默认展示 |

---

### 3.8 交互逻辑

#### 3.8.1 首次提交流程

**状态：所有Tab均未提交**

1. **Tab标识**：所有Tab右侧显示红色感叹号图标（表示未完成）
2. **页面模式**：表单字段全部可编辑
3. **自动保存**：
   - 字段失焦后触发自动保存
   - 顶部显示自动保存状态："保存中..." → "HH:mm 自动保存"
4. **操作按钮**：
   - "保存草稿"：保存当前Tab数据，不校验必填项
   - "提交本页"：校验当前Tab必填项，通过后提交
     - 提交成功：当前Tab标记为已提交，红色感叹号消失
     - 提交失败：显示错误提示，定位到第一个错误字段
5. **Tab切换**：
   - 可自由切换Tab
   - 未提交的Tab保留草稿数据

**6个Tab全部提交后**：
- 整个申请单状态变为"待审核"
- 等待平台审核

#### 3.8.2 后续维护流程（已提交状态）

**状态：Tab已提交**

1. **Tab标识**：Tab右侧不显示图标（表示已完成）
2. **页面模式**：默认为只读模式
   - 所有表单字段禁用（置灰）
   - 禁用状态下保持清晰可读（不降低透明度）
3. **操作按钮**：
   - 只显示"编辑"按钮（主按钮样式）
4. **点击"编辑"**：
   - 进入编辑模式
   - 所有表单字段变为可编辑
   - 操作按钮切换为："取消" + "保存"
5. **编辑模式操作**：
   - "取消"：退出编辑模式，恢复为只读模式，丢弃未保存的修改
   - "保存"：保存修改，退出编辑模式
     - 无需重新审核，直接生效
6. **Tab切换规则**：
   - 未提交的Tab：可自由切换，保留草稿
   - 已提交的Tab：默认只读，点击"编辑"后可修改

#### 3.8.3 进度统计规则

Tab进度统计（顶部不展示，仅用于开发参考）：
- Tab1：10个必填字段
- Tab2：8个必填字段
- Tab3：12个必填字段
- Tab4：6个必填字段
- Tab5：至少1个房型，且房型必填字段完整
- Tab6：1个必填字段（根据主体类型）

#### 3.8.4 吸顶Tab导航

**吸顶触发**：
- 页面滚动超过100px时，Tab导航固定在页面顶部
- 添加阴影效果，提升视觉层次

**吸顶样式**：
- 固定定位：`position: fixed; top: 0; left: 256px; right: 0;`
- 阴影：`box-shadow: 0 4px 6px rgba(0,0,0,0.07);`

---

## 四、选项配置（平台端）

### 4.1 功能背景

#### 4.1.1 为什么需要选项配置？

**问题**：
- 门店设施、亮点等枚举选项由产品/运营定义
- 当前写死在代码中，新增/修改选项需要改代码发版
- 选项在多个页面使用（Tab1门店亮点、Tab2门店设施、Tab5房型设施），维护困难

**解决方案**：
- 平台提供"选项配置"功能，由平台管理员统一管理枚举选项
- 商户端从API动态加载选项，无需改代码
- 平台修改选项后，实时联动到商户端

#### 4.1.2 谁来管理选项？

**平台管理员**：
- 平台的产品经理、运营人员
- 根据业务需求和市场调研，决定选项内容
- 确保选项准确、完整、符合行业标准

#### 4.1.3 选项的作用范围

**14个分类**：
- 门店亮点（2个）：建筑与景观、服务与设施
- 门店设施（12个）：交通服务、清洁服务、安全安保、公共区域、前台服务、娱乐设施、餐饮服务、商务服务、儿童设施、运动设施、康体设施、无障碍设施

**应用场景**：
- Tab1：门店亮点（建筑与景观、服务与设施）
- Tab2：门店设施（12个分类）
- Tab5：房型设施（8个分类，部分复用门店设施的分类）

### 4.2 页面结构

**路由地址**：`/platform-admin/options-config`

**布局**：左右分栏
- **左侧导航**（宽度240px）：14个分类导航
  - 分类标题（2个）：门店亮点、门店设施
  - 分类列表：点击切换右侧内容
  - 每个分类显示选项数量（灰色标签）
- **右侧内容区**：当前分类的选项管理
  - 顶部：分类标题 + "添加选项"按钮
  - 选项网格：4列布局，拖拽排序
  - 空状态：无选项时显示提示 + "添加第一个选项"按钮

### 4.3 选项管理操作

#### 4.3.1 数据来源

**初始数据**：
- 从`storeDeployment.ts`的常量初始化（首次加载时）
- 示例：`TRANSPORTATION_FACILITIES = ['充电桩', '叫车服务', '接送站服务', ...]`

**存储方式**：
- 开发环境：使用localStorage模拟（`platform_options_config`）
- 生产环境：调用后端API保存到数据库

#### 4.3.2 添加选项

**触发方式**：点击顶部"添加选项"按钮

**弹窗表单**：
| 字段名称 | 必填/选填 | 字段类型 | 输入框内暗提示 | 输入框下方提示 |
|---------|----------|---------|--------------|--------------|
| 选项文本 | 必填 | 填空 | 请输入选项文本 | 最多20个字 |

**操作**：
- 点击"确定"：保存选项，添加到当前分类
- 点击"取消"：关闭弹窗

#### 4.3.3 编辑选项

**触发方式**：双击选项文本

**弹窗表单**：同添加选项

**操作**：
- 点击"确定"：保存修改
- 点击"取消"：关闭弹窗，丢弃修改

#### 4.3.4 删除选项

**触发方式**：点击选项右侧的×图标

**确认弹窗**：
- 标题：确认删除
- 内容：确定要删除选项"XXX"吗？
- 操作：
  - 点击"确定"：删除选项
  - 点击"取消"：关闭弹窗

#### 4.3.5 拖拽排序

**触发方式**：拖动选项左侧的☰图标

**排序逻辑**：
- 拖动到目标位置后松开
- 自动保存新的排序
- 提示"排序已更新"

#### 4.3.6 实时联动机制

**原理**：
1. 平台修改选项后，调用API保存
2. API保存成功后，触发自定义事件：
   ```javascript
   window.dispatchEvent(new CustomEvent('optionsConfigUpdated', {
     detail: { category, options }
   }))
   ```
3. 商户端页面监听该事件：
   ```javascript
   window.addEventListener('optionsConfigUpdated', handleOptionsUpdate)
   ```
4. 事件触发后，商户端自动重新调用API加载最新选项

**生效范围**：
- Tab1：门店亮点（建筑与景观、服务与设施）
- Tab2：门店设施（12个分类）
- Tab5：房型设施（8个分类）

**用户体验**：
- 商户端无需刷新页面，选项自动更新
- 商户已选择的选项不受影响（即使平台删除了该选项）

### 4.4 选项展示规范

**选项卡片样式**：
- 布局：4列网格，行间距12px，列间距16px
- 样式：
  - 背景：`#f8fafc`（浅灰色）
  - 边框：`1px solid #e2e8f0`
  - 圆角：`6px`
  - 内边距：`8px 12px`
- Hover效果：
  - 边框变为品牌蓝
  - 显示☰拖动图标和×删除图标

**操作图标**：
- ☰拖动图标：左侧，平时半透明（`opacity: 0.3`），hover时不透明
- ×删除图标：右侧，平时半透明（`opacity: 0.3`），hover时变红色

---

## 五、商户上架（平台端）

### 5.1 功能背景

#### 5.1.1 为什么需要商户上架审核？

**背景**：
- 商户提交门店信息后，需要平台审核通过才能在C端展示
- 避免虚假信息、低质量信息影响C端用户体验
- 确保商户资质合规（营业执照、身份证等）

#### 5.1.2 谁来审核？

**平台管理员**：
- 平台的审核专员、运营人员
- 负责审核商户提交的门店信息
- 决定商户是否准许上架

#### 5.1.3 审核的意义

**质量把关**：
- 确保门店信息真实、完整、准确
- 检查营业执照、身份证等资质证件
- 审核门店图片、视频等展示素材质量

**风险控制**：
- 防止虚假商户、欺诈行为
- 保障C端用户权益
- 维护平台信誉

### 5.2 页面结构

**路由地址**：`/platform-admin/merchant-approval`

**列表展示**：

| 列名 | 宽度 | 说明 |
|------|------|------|
| 提交时间 | 160px | 日期 + 时间分行显示 |
| 门店名称 | 200px | - |
| 操作 | 300px | 操作按钮 |

**操作按钮**（所有商户）：
- "查看门店信息"：跳转到门店信息配置页面（只读模式）

**操作按钮（待审核商户）**：
- "准许上架"：审核通过，商户上架

**操作按钮（已上架商户）**：
- 显示绿色标签"已上架"

### 5.3 审核流程

#### 5.3.1 查看门店信息

**触发方式**：点击"查看门店信息"按钮

**跳转逻辑**：
- 路由：`/merchant-backend/join-application/apply?applicationId=XXX&mode=view&from=approval`
- 参数：
  - `applicationId`：申请单ID
  - `mode=view`：只读模式
  - `from=approval`：标记来源是审核页面

**页面展示**：
- 6个Tab全部展示
- 所有表单字段禁用（只读）
- 不显示"编辑"、"保存草稿"、"提交本页"按钮
- 顶部显示"返回审核列表"按钮

#### 5.3.2 准许上架

**触发方式**：点击"准许上架"按钮

**确认弹窗**：
- 标题：准许上架
- 内容：确定准许"XXX"上架吗？
- 操作：
  - 点击"确定"：上架成功，商户状态变为"已上架"
  - 点击"取消"：关闭弹窗

**上架后**：
- 列表中该商户的操作按钮变为绿色标签"已上架"
- 商户在C端可见

---

## 六、数据联动关系

### 6.1 平台→商户端联动

#### 6.1.1 选项配置→门店信息配置

**联动分类**：
- 门店亮点：建筑与景观、服务与设施
- 门店设施：交通服务、清洁服务、安全安保、公共区域、前台服务、娱乐设施、餐饮服务、商务服务、儿童设施、运动设施、康体设施、无障碍设施

**联动机制**：
1. 平台在"选项配置"中修改选项（添加、编辑、删除、排序）
2. API保存成功后，触发`optionsConfigUpdated`事件
3. 商户端监听该事件，自动重新调用API加载最新选项
4. 商户端多选框实时更新，无需刷新页面

**已选选项处理**：
- 平台删除某个选项后，商户已选择的该选项不会被删除
- 商户仍可看到已选择的选项（保留历史数据）
- 商户可取消勾选已删除的选项

### 6.2 Tab内部联动

#### 6.2.1 Tab1：房间数量→Tab5配置进度

**联动逻辑**：
- Tab1填写"房间数量"（例如：21间）
- Tab5顶部显示：`酒店房间数共21间，已配置X间`
- 商户添加房型时，`已配置数量 = ∑(各房型的数量)`
- 当`已配置数量 = 总房间数`时，显示绿色提示"已完成"
- 当`已配置数量 < 总房间数`时，显示橙色提示"待完成"

#### 6.2.2 Tab4：列表页封面→小程序分享图

**联动逻辑**：
- Tab4上传"列表页封面"后
- 自动生成"小程序分享图（自动生成）"行
- 显示封面图的缩略图预览
- 比例调整为5:4（用于小程序分享卡片）

#### 6.2.3 Tab3：条件展示字段

**儿童政策联动**：
- 选择"不接待儿童"：隐藏"儿童年龄限制"字段
- 选择"接待儿童"：显示"儿童年龄限制"字段
  - 选择"不限制"：不显示年龄输入框
  - 选择"限制"：显示"儿童最低年龄"输入框

**早餐政策联动**：
- 选择"不提供"：隐藏所有早餐相关字段
- 选择"提供"：显示早餐类型、供应形式、时间、费用、儿童早餐等字段
  - 选择"按年龄"：显示"儿童年龄标准"下拉框
  - 选择"按身高"：显示"儿童身高标准"下拉框
  - 选择"免费"：隐藏"儿童早餐费用"输入框
  - 选择"收费"：显示"儿童早餐费用"输入框

---

## 七、总结

### 7.1 功能价值

**商户价值**：
- 分步引导，降低信息填写难度
- 支持草稿保存，避免数据丢失
- 实时联动选项，简化维护操作

**平台价值**：
- 统一管理枚举选项，提升运营效率
- 审核商户信息，保障平台质量
- 降低技术维护成本，无需改代码发版

**C端用户价值**：
- 门店信息完整、准确，辅助决策
- 图片、视频素材丰富，提升体验
- 运营政策透明，减少纠纷

### 7.2 核心设计亮点

1. **分步提交机制**：6个Tab独立提交，降低填写压力
2. **草稿自动保存**：防止数据丢失，提升用户体验
3. **编辑/只读模式切换**：已提交Tab默认只读，需编辑时明确操作
4. **选项实时联动**：平台修改选项，商户端自动更新
5. **配置进度提示**：房型配置进度实时提示，帮助商户把控完成度
6. **多层级字段组织**：Tab→卡片→字段，清晰的信息架构

### 7.3 后续优化方向

1. **审核驳回功能**：支持平台驳回商户申请，并说明原因
2. **历史版本对比**：商户修改信息时，记录历史版本
3. **批量导入**：支持商户批量导入房型、设施等信息
4. **图片压缩优化**：前端自动压缩图片，提升上传速度
5. **AI辅助填写**：根据门店照片，AI自动生成门店介绍

---

**文档版本**：v1.0
**最后更新**：2025-12-18
**撰写人**：产品经理（Claude Sonnet 4.5）
