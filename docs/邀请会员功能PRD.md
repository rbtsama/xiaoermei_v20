# 邀请会员功能 PRD

## 文档信息

| 项目 | 内容 |
|-----|------|
| 文档版本 | v1.0 |
| 创建日期 | 2026-01-14 |
| 产品模块 | 商户端 - 会员服务 |
| 功能入口 | 商户后台 > 会员服务 > 邀请会员 |
| 文档状态 | 已实现 ✅ |

---

## 一、功能概述

### 1.1 功能定位

邀请会员功能是商户端的核心会员拓展工具，帮助商户主动邀请老客户成为平台会员，享受会员权益并参与分销体系。

### 1.2 核心价值

- **商户价值**：拓展会员基础，获得分销奖励
- **客户价值**：成为会员后享受等级权益（可购送亲友券、里程值累计）
- **平台价值**：扩大会员体系，增加用户粘性

---

## 二、功能架构

### 2.1 功能模块

```
邀请会员
├── 批量邀请客户（Excel上传）
├── 单个邀请客户（表单填写）
├── 邀请客户扫码（二维码下载）
├── 邀请记录（查看历史）
└── 分销奖励（查看收益）
```

### 2.2 页面关系

```
┌─────────────┐
│  邀请会员   │ (主页面)
├─────────────┤
│ - 批量邀请  │
│ - 单个邀请  │
│ - 扫码邀请  │
└─────────────┘
      ↓
┌─────────────┐     ┌─────────────┐
│  邀请记录   │     │  分销奖励   │
└─────────────┘     └─────────────┘
```

---

## 三、详细功能设计

### 3.1 批量邀请客户

#### 3.1.1 功能描述
通过上传Excel文件批量导入客户信息并发送邀请。

#### 3.1.2 操作流程

1. **下载模板**：点击"下载模板"链接，下载`导入客户模板.xlsx`
2. **填写Excel**：必填手机号和会员等级，其他字段可选
3. **上传文件**：点击"上传邀请清单"，选择.xlsx或.xls文件
4. **查看结果**：上传成功显示文件名和数据条数，格式错误显示错误提示
5. **发送邀请**：点击"批量邀请"，二次确认后发送

#### 3.1.3 Excel字段规范

| 列 | 字段名称 | 必填 | 格式要求 | 示例 |
|----|---------|------|---------|------|
| A | 客户姓名 | 否 | 最长50字符 | 张三 |
| B | 客户手机号 | 是 | 11位数字 | 13800138000 |
| C | 性别 | 否 | 男/女 | 男 |
| D | 生日 | 否 | 年/月/日 | 1997/09/07 |
| E | 省 | 否 | 最长20字符 | 浙江省 |
| F | 市 | 否 | 最长20字符 | 杭州市 |
| G | 区 | 否 | 最长20字符 | 桐庐县 |
| H | 邮箱 | 否 | 邮箱格式，最长30位 | user@example.com |
| I | 会员等级 | 是 | VIP1/VIP2/VIP3 | VIP1 |

#### 3.1.4 VIP等级规则展示

| 会员等级 | 获得条件 | 会员权益 | 有效期 | 保级规则 |
|---------|---------|---------|-------|---------|
| VIP1 | 预订1次及以上 | 可购送亲友*1，消费1元累计1里程值 | 2年 | 预订1次及以上 |
| VIP2 | 预订5次及以上 | 可购送亲友*2，消费1元累计1里程值 | 2年 | 预订3次及以上 |
| VIP3 | 预订10次及以上 | 可购送亲友*3，消费1元累计1里程值 | 2年 | 预订6次及以上 |

---

### 3.2 单个邀请客户

#### 3.2.1 表单字段

| 字段 | 必填 | 类型 | 要求 |
|-----|------|------|------|
| 客户手机号 | 是 | 输入框 | 11位数字 |
| 客户姓名 | 否 | 输入框 | 最长50字符 |
| 性别 | 否 | 下拉 | 男/女 |
| 生日 | 否 | 输入框 | 年/月/日 |
| 地址 | 否 | 3个输入框 | 省、市、区 |
| 邮箱 | 否 | 输入框 | 最长30位 |
| 会员等级 | 是 | 下拉 | VIP1/VIP2/VIP3 |

---

### 3.3 邀请客户扫码

#### 3.3.1 功能要素

- **会员等级选择**：VIP1 / VIP2 / VIP3（单选）
- **VIP规则表格**：展示等级规则（左对齐，最大宽度1000px）
- **二维码**：180px × 180px，居中显示
- **下载按钮**：下载邀请二维码（3天有效），居中显示

---

## 四、验证规则

### 4.1 字段验证

| 字段 | 验证规则 | 正则/逻辑 |
|------|---------|----------|
| 手机号 | 11位数字，1开头 | `/^1[3-9]\d{9}$/` |
| 性别 | 男或女 | 精确匹配 |
| 生日 | YYYY/MM/DD格式 | 年份1900-当前年 |
| 邮箱 | 标准邮箱格式 | `/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/` |
| 会员等级 | VIP1-3 | 不区分大小写 |

### 4.2 错误提示

- 最多显示前5条错误
- 格式：`第{行号}行: {错误描述}`
- 示例：`第3行: 手机号格式不正确，应为11位数字`

---

## 五、交互设计

### 5.1 批量邀请交互

**初始状态**：
- 上传按钮 + 下载模板链接
- 显示字段要求（7条）
- VIP规则表格
- 批量邀请按钮置灰

**上传后**：
- 显示文件名和条数
- 批量邀请按钮激活（蓝色）

**点击邀请**：
- 确认弹窗："确定邀请 X 位会员吗？"
- 结果弹窗：成功X条，失败X条

### 5.2 按钮样式

**禁用状态**：
- 背景：#f0f0f0
- 边框：#d9d9d9
- 文字：rgba(0,0,0,0.25)
- 光标：not-allowed

---

## 六、技术实现

### 6.1 核心技术

- Vue 2 Composition API
- TypeScript
- Ant Design Vue 1.7.8
- XLSX 0.18.5（Excel解析）
- Day.js（日期处理）

### 6.2 关键文件

- `src/views/MerchantBackend/MemberService/InviteMemberPage.vue`（1359行）
- `src/views/MerchantBackend/MemberService/InviteRecordsPage.vue`
- `src/views/MerchantBackend/MemberService/CommissionRewardsPage.vue`
- `src/api/memberService.ts`

---

## 七、待接入API

1. 批量邀请API：`batchInviteMembers()`
2. 单个邀请API：`inviteSingleMember()`
3. 二维码生成API：`/api/invite-qrcode?vipLevel={level}`
4. 邀请记录查询API：`getInviteRecords()`
5. 分销奖励查询API：`getCommissionRecords()`

---

**文档编写**：Claude Sonnet 4.5  
**最后更新**：2026-01-14
