<!--
  ç³»ç»Ÿæ¶æ„è„‘å›¾ç»„ä»¶ - ç´§å‡‘ç‰ˆ
  åŠŸèƒ½é¢—ç²’åº¦ï¼š2-6ä¸ªå·¥ä½œæ—¥ï¼Œé€‚åˆæ‰“å°è¾“å‡º
-->
<template>
  <div class="space-y-6">
    <!-- ç²¾ç®€ç»Ÿè®¡å¡ç‰‡ - ä½¿ç”¨é…è‰²ç³»ç»Ÿ -->
    <a-card class="border-2 border-brand-secondary">
      <template #title>
        <div class="bg-gradient-to-r from-brand-secondary to-brand-error text-white py-4 -m-6 mb-6 px-6 rounded-t-lg">
          <div class="flex items-center justify-between">
            <div class="text-2xl">åŒç«¯ç³»ç»ŸåŠŸèƒ½æ¶æ„</div>
            <div class="flex gap-4 text-sm">
              <a-tag class="bg-white/20 text-white text-base px-3 py-1 border-0">2ä¸ªäº§å“ç«¯</a-tag>
              <a-tag class="bg-white/20 text-white text-base px-3 py-1 border-0">{{ totalFunctions }}ä¸ªåŠŸèƒ½æ¨¡å—</a-tag>
              <a-tag class="bg-white/20 text-white text-base px-3 py-1 border-0">{{ (totalFunctions * 4).toFixed(0) }}å·¥ä½œæ—¥</a-tag>
            </div>
          </div>
        </div>
      </template>
    </a-card>

    <!-- åŒç«¯æ¶æ„å›¾ - ç´§å‡‘å¸ƒå±€ -->
    <div class="grid grid-cols-2 gap-4">
      <!-- å¹³å°åå° -->
      <a-card class="border-2 border-brand-primary">
        <template #title>
          <div class="bg-brand-primary text-white py-3 -m-6 mb-6 px-6 rounded-t-lg">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-2">
                <span class="text-xl">ğŸª</span>
                <div class="text-lg">{{ platformArchitecture.name }}</div>
              </div>
              <a-tag class="bg-brand-primary/80 text-white border-0">{{ stats.platform.functions }}ä¸ªåŠŸèƒ½</a-tag>
            </div>
          </div>
        </template>
        <div class="p-4">
          <div class="space-y-3">
            <div v-for="(module, i) in platformArchitecture.modules" :key="i" class="bg-brand-primary/5 rounded p-3 border border-brand-primary/20">
              <div class="flex items-center justify-between mb-2">
                <h4 class="font-bold text-sm text-brand-primary">{{ module.name }}</h4>
                <a-tag class="text-xs border-slate-300">{{ module.functions.length }}</a-tag>
              </div>
              <div class="space-y-1">
                <div v-for="(func, j) in module.functions" :key="j" class="text-xs text-text-secondary flex items-start gap-1">
                  <span class="text-brand-primary flex-shrink-0">â€¢</span>
                  <span>{{ func }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </a-card>

      <!-- å•†æˆ·ç«¯ -->
      <a-card class="border-2 border-brand-success">
        <template #title>
          <div class="bg-brand-success text-white py-3 -m-6 mb-6 px-6 rounded-t-lg">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-2">
                <span class="text-xl">ğŸª</span>
                <div class="text-lg">{{ hotelArchitecture.name }}</div>
              </div>
              <a-tag class="bg-brand-success/80 text-white border-0">{{ stats.hotel.functions }}ä¸ªåŠŸèƒ½</a-tag>
            </div>
          </div>
        </template>
        <div class="p-4">
          <div class="space-y-3">
            <div v-for="(module, i) in hotelArchitecture.modules" :key="i" class="bg-brand-success/5 rounded p-3 border border-brand-success/20">
              <div class="flex items-center justify-between mb-2">
                <h4 class="font-bold text-sm text-brand-success">{{ module.name }}</h4>
                <a-tag class="text-xs border-slate-300">{{ module.functions.length }}</a-tag>
              </div>
              <div class="space-y-1">
                <div v-for="(func, j) in module.functions" :key="j" class="text-xs text-text-secondary flex items-start gap-1">
                  <span class="text-brand-success flex-shrink-0">â€¢</span>
                  <span>{{ func }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </a-card>
    </div>

    <!-- æ•°æ®æµå‘å›¾ -->
    <a-card class="border-2 border-border-normal">
      <template #title>
        <div class="bg-text-primary text-white py-3 -m-6 mb-6 px-6 rounded-t-lg">
          <div class="text-lg">æ ¸å¿ƒä¸šåŠ¡æ•°æ®æµ</div>
        </div>
      </template>
      <div class="p-4">
        <div class="grid grid-cols-2 gap-4">
          <div class="space-y-2">
            <h4 class="font-bold text-sm text-brand-primary">è®¢å•ç®¡ç†æµç¨‹</h4>
            <div class="flex items-center gap-2 text-xs">
              <a-tag class="bg-brand-success text-white border-0">å•†æˆ·ç«¯</a-tag>
              <span class="text-base">â†’</span>
              <span class="text-text-secondary">æ¥æ”¶è®¢å•</span>
              <span class="text-base">â†’</span>
              <a-tag class="bg-brand-secondary text-white border-0">å¤„ç†è®¢å•</a-tag>
              <span class="text-base">â†’</span>
              <a-tag class="bg-brand-primary text-white border-0">å¹³å°ç›‘æ§</a-tag>
            </div>
          </div>
          <div class="space-y-2">
            <h4 class="font-bold text-sm text-brand-success">æˆ¿åŠ¡ç®¡ç†æµç¨‹</h4>
            <div class="flex items-center gap-2 text-xs">
              <a-tag class="bg-brand-success text-white border-0">å•†æˆ·ç«¯</a-tag>
              <span class="text-base">â†’</span>
              <span class="text-text-secondary">æ›´æ–°ä»·æ ¼åº“å­˜</span>
              <span class="text-base">â†’</span>
              <a-tag class="bg-brand-secondary text-white border-0">å®æ—¶åŒæ­¥</a-tag>
              <span class="text-base">â†’</span>
              <a-tag class="bg-brand-primary text-white border-0">å¹³å°å¯è§</a-tag>
            </div>
          </div>
        </div>
      </div>
    </a-card>
  </div>
</template>

<script>
import { defineComponent, computed } from '@vue/composition-api'

export default defineComponent({
  name: 'SystemArchitecture',
  setup() {
    const platformArchitecture = {
      name: 'å¹³å°åå°',
      modules: [
        { name: 'è®¢å•ç®¡ç†', functions: ['è®¢å•åˆ—è¡¨', 'é€€æ¬¾ç®¡ç†'] },
        { name: 'ç§¯åˆ†ç®¡ç†', functions: ['ç§¯åˆ†è§„åˆ™é…ç½®', 'ç§¯åˆ†è°ƒæ•´', 'ç§¯åˆ†å¢å€¼æœåŠ¡'] },
        { name: 'ä¼šå‘˜ç®¡ç†', functions: ['ä¼šå‘˜ç­‰çº§è®¾ç½®', 'ä¼šå‘˜é‚€è¯·è®°å½•', 'ä¼šå‘˜æŸ¥è¯¢'] },
      ],
    }

    const hotelArchitecture = {
      name: 'å•†æˆ·ç«¯',
      modules: [
        { name: 'å…¥é©»å¹³å°', functions: ['å…¥é©»ç”³è¯·'] },
        { name: 'é—¨åº—ä¿¡æ¯', functions: ['åŸºæœ¬ä¿¡æ¯', 'æ”¿ç­–ç›¸å…³', 'é—¨åº—è®¾æ–½', 'å‘¨è¾¹ä¿¡æ¯', 'æ—©é¤æ”¿ç­–', 'åŠ åºŠæ”¿ç­–', 'é—¨åº—å›¾ç‰‡'] },
        { name: 'è®¢å•ç®¡ç†', functions: ['è®¢å•åˆ—è¡¨', 'è®¢å•æ—¥å†', 'å®¢è¯‰é€€æ¬¾', 'ç”¨æˆ·è¯„ä»·'] },
        { name: 'æˆ¿åŠ¡ç®¡ç†', functions: ['æˆ¿ä»·æ—¥å†', 'åº“å­˜æ—¥å†', 'æˆ¿å‹åˆ—è¡¨', 'æˆ¿å‹å›¾ç‰‡', 'æˆ¿é—´ç®¡ç†', 'PMSå¯¹æ¥'] },
        { name: 'ä¼šå‘˜æœåŠ¡', functions: ['ç§¯åˆ†æœåŠ¡é…ç½®', 'VIPæŠ˜æ‰£é…ç½®', 'ä»£å®¢ä¸‹å•', 'é‚€è¯·ä¼šå‘˜'] },
      ],
    }

    const stats = computed(() => ({
      platform: {
        modules: platformArchitecture.modules.length,
        functions: platformArchitecture.modules.reduce((s, m) => s + m.functions.length, 0),
      },
      hotel: {
        modules: hotelArchitecture.modules.length,
        functions: hotelArchitecture.modules.reduce((s, m) => s + m.functions.length, 0),
      },
    }))

    const totalFunctions = computed(() => stats.value.platform.functions + stats.value.hotel.functions)

    return { platformArchitecture, hotelArchitecture, stats, totalFunctions }
  },
})
</script>
